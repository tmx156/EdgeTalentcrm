# Supabase Configuration
SUPABASE_URL=your-supabase-url
SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key

# Database Configuration (for migration)
DATABASE_URL=sqlite:///server/local-crm.db

# SMS Configuration
BULKSMS_USERNAME=your-bulksms-username
BULKSMS_PASSWORD=your-bulksms-password
BULKSMS_FROM_NUMBER=+44XXXXXXXXXX
BULKSMS_POLL_ENABLED=true
BULKSMS_POLL_INTERVAL_MS=5000

# ============================================================================
# Gmail API Configuration (NEW - Recommended over SMTP/IMAP)
# ============================================================================
# Email account to use with Gmail API
GMAIL_EMAIL=hello@edgetalent.co.uk

# OAuth2 Credentials from Google Cloud Console
# Get these from: https://console.cloud.google.com/apis/credentials
GMAIL_CLIENT_ID=your-client-id.apps.googleusercontent.com
GMAIL_CLIENT_SECRET=GOCSPX-your-client-secret

# Refresh Token (get this by visiting http://localhost:5000/api/gmail/auth)
GMAIL_REFRESH_TOKEN=your-refresh-token

# Redirect URI for OAuth2 (change for production)
GMAIL_REDIRECT_URI=http://localhost:5000/api/gmail/oauth2callback

# For Railway Production (update when deploying):
# GMAIL_REDIRECT_URI=https://your-app.up.railway.app/api/gmail/oauth2callback

# Optional: Polling interval in milliseconds (default: 60000 = 1 minute)
GMAIL_POLL_INTERVAL_MS=60000
# ============================================================================

# ============================================================================
# Gmail API Configuration - SECONDARY ACCOUNT
# ============================================================================
# Second email account to use with Gmail API
GMAIL_EMAIL_2=your-second-email@gmail.com

# OAuth2 Credentials from Google Cloud Console for second account
GMAIL_CLIENT_ID_2=your-client-id-2.apps.googleusercontent.com
GMAIL_CLIENT_SECRET_2=GOCSPX-your-client-secret-2

# Refresh Token for second account
GMAIL_REFRESH_TOKEN_2=your-refresh-token-2

# Redirect URI for OAuth2 - second account
GMAIL_REDIRECT_URI_2=http://localhost:5000/api/gmail/oauth2callback2
# ============================================================================

# ============================================================================
# Gmail Push Notifications (Google Cloud Pub/Sub) - OPTIONAL BUT RECOMMENDED
# ============================================================================
# Enable Gmail Push Notifications for real-time email monitoring
# When enabled: Uses Pub/Sub webhooks (< 5 second latency, 90% less API usage)
# When disabled: Uses traditional polling (60 second delay, higher API usage)
GMAIL_PUSH_ENABLED=false

# Google Cloud Project ID (required for push notifications)
# Get this from: https://console.cloud.google.com/
GOOGLE_CLOUD_PROJECT_ID=your-project-id

# Webhook secret for security (generate a random 64-character string)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
GMAIL_WEBHOOK_SECRET=your-random-secret-token-here

# Public URL of your application (required for Pub/Sub to send webhooks)
# Local development: Use ngrok URL (e.g., https://abc123.ngrok.io)
# Production: Your Railway/production URL
PUBLIC_URL=https://your-app.up.railway.app

# ============================================================================
# Setup Instructions for Gmail Push Notifications:
# ============================================================================
# 1. Create Google Cloud Pub/Sub topics:
#    - gcloud pubsub topics create gmail-notifications-primary
#    - gcloud pubsub topics create gmail-notifications-secondary
#
# 2. Grant Gmail publish permissions:
#    - gcloud pubsub topics add-iam-policy-binding gmail-notifications-primary \
#        --member=serviceAccount:gmail-api-push@system.gserviceaccount.com \
#        --role=roles/pubsub.publisher
#    - gcloud pubsub topics add-iam-policy-binding gmail-notifications-secondary \
#        --member=serviceAccount:gmail-api-push@system.gserviceaccount.com \
#        --role=roles/pubsub.publisher
#
# 3. Create push subscriptions:
#    - gcloud pubsub subscriptions create gmail-push-primary \
#        --topic=gmail-notifications-primary \
#        --push-endpoint=https://your-app.up.railway.app/api/gmail/webhook/primary?token=YOUR_SECRET
#    - gcloud pubsub subscriptions create gmail-push-secondary \
#        --topic=gmail-notifications-secondary \
#        --push-endpoint=https://your-app.up.railway.app/api/gmail/webhook/secondary?token=YOUR_SECRET
#
# 4. Run database migrations in Supabase SQL Editor:
#    - server/migrations/enable_gmail_deduplication.sql
#    - server/migrations/create_gmail_watch_state.sql
#    - server/migrations/add_gmail_account_tracking.sql
#
# 5. Set GMAIL_PUSH_ENABLED=true and restart server
# ============================================================================

# Server Configuration
PORT=5000
NODE_ENV=development

# Public URL for short links
PUBLIC_BASE_URL=http://localhost:5000

# React App Environment Variables (for client-side)
REACT_APP_SUPABASE_URL=your-supabase-url
REACT_APP_SUPABASE_ANON_KEY=your-supabase-anon-key

# Email Account Display Names (for frontend dropdowns)
REACT_APP_PRIMARY_EMAIL=hello@edgetalent.co.uk
REACT_APP_SECONDARY_EMAIL=your-second-email@gmail.com

# SalesApe API Configuration
SALESAPE_API_KEY=your-salesape-api-key
SALESAPE_ENABLED=true
SALESAPE_AIRTABLE_BASE_ID=your-airtable-base-id
SALESAPE_AIRTABLE_TABLE_NAME=your-airtable-table-name
SALESAPE_PAT=your-airtable-pat

# SalesApe Sync Service Configuration
# Automatically syncs lead status from SalesApe back to CRM
SALESAPE_SYNC_ENABLED=true
SALESAPE_SYNC_INTERVAL=120000
